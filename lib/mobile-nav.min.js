angular.module("ajoslin.mobile-navigate",[]).run(["$navigate","$rootScope",function(b,a){document.addEventListener("deviceready",function(){document.addEventListener("backbutton",function(){a.$apply(function(){var c=b.back();if(!c){navigator.app.exitApp()}})})})}]);angular.module("ajoslin.mobile-navigate").provider("$change",function(){var f={modal:["modal",""],none:["",""]};var c={prefix:"mb-"};var e="in";var g="out";var b="reverse";var d="done";var a="webkitAnimationEnd";this.setTransitionPreset=function(j,i,h){i=i||"";h=h||i;f[j]=[i,h]};this.options=function(h){c=angular.extend(c,h||{})};this.$get=["$q","$rootScope",function(i,h){return function j(q,n,k,r,x){x=angular.extend(x||{},c);var w=i.defer(),o,l;function t(y){return y.reduce(function(A,z){return A+(z?(" "+x.prefix+z):"")},"")}var s=f[k]?f[k]:[k,k];q.css("z-index","-100");q[0].offsetWidth+=0;var u=t([r?g:e,(o=s[r?1:0]),r&&b||""]);q.addClass(u);var v;if(n){v=t([r?e:g,(l=s[r?0:1]),r&&b||""]);n.addClass(v)}q.css("z-index","");q[0].offsetWidth+=0;function p(){h.$apply(function(){w.resolve()})}var m;if(o&&o.length){(m=q).bind(a,p)}else{if(n&&l&&l.length){(m=n).bind(a,p)}else{w.resolve()}}w.promise.then(function(){m&&m.unbind(a,p);q.removeClass(u);n&&n.removeClass(v)});w.promise.cancel=function(){w.resolve()};return w.promise}}]});angular.module("ajoslin.mobile-navigate").provider("$navigate",function(){this.$get=["$rootScope","$location","$route",function(g,e,f){var a={},b=[];function i(o,p,n){var l=o,j=p||"slide",m=n,k;this.transition=function(){var q;if(k){q=k;k=null}else{q=j}return q};this.path=function(){return l};this.reverse=function(){return m};this.transitionOnce=function(q){k=q}}function c(j,l,k){g.$broadcast("$pageTransitionStart",j,l,k);a.current=a.next}a.onRouteSuccess=null;function h(j,k,l){a.current&&b.push(a.current);a.next=new i(e.path());a.next.transitionOnce("none");c(a.next);a.onRouteSuccess=null}g.$on("$routeChangeSuccess",function(j,k,l){if(!k.$$route||!k.$$route.redirectTo){(a.onRouteSuccess||h)(j,k,l)}});a.go=function d(k,l,j){if(typeof l=="boolean"){j=l;l=null}e.path(k);a.onRouteSuccess=function(m,n,o){a.current&&b.push(a.current);a.next=new i(k,l||(n.$$route&&n.$$route.transition),j);c(a.next,a.current,false)}};a.eraseHistory=function(){b.length=0};a.back=function(){if(b.length>0){var j=b[b.length-1];e.path(j.path());a.onRouteSuccess=function(){b.pop();a.next=j;c(a.next,a.current,true)};return true}return false};return a}]});angular.module("ajoslin.mobile-navigate").directive("mobileView",["$rootScope","$compile","$controller","$route","$change","$q",function(b,e,a,g,d,c){function f(l,j,i){function k(m){var o=g.current,n=o&&o.locals;m.element=angular.element(document.createElement("div"));m.element.html(n.$template);m.element.addClass("mb-page");m.scope=l.$new();if(o.controller){n.$scope=m.scope;m.controller=a(o.controller,n);m.element.contents().data("$ngControllerController",m.controller)}e(m.element.contents())(m.scope);if(n&&n.$template){j.append(m.element)}m.scope.$emit("$viewContentLoaded");m.scope.$eval(i.onLoad);return m}var h;l.$on("$pageTransitionStart",function(p,o,q,n){function m(){var u=g.current?g.current.$$route:{};var v=n?q.transition():o.transition();k(o);if(o.reverse()||u.reverse){n=!n}function s(){var w=d(o.element,(q?q.element:null),v,n);w.then(function(){if(q){b.$broadcast("$pageTransitionSuccess",o,q);q.scope.$destroy();q.element.remove();q=undefined}});return w}o.element.css("display","none");var r=l.$eval(i.deferTransition)||c.when();r.cancel=function(){t=true;o.element.css("display","")};var t=false;r.then(function(){if(!t){o.element.css("display","");return s()}});return r}h&&h.cancel();h=m(o,q,n)})}return{restrict:"EA",link:f}}]).directive("scrollable",["$route",function(b){var a={};return{restrict:"EA",link:function(f,h,d){var c=b.current?b.current.$$route:{};var e=c.templateUrl||c.template;var g=h[0];if(e){setTimeout(function(){var i=a[e];if(i){g.scrollTop=i}});f.$on("$destroy",function(){a[e]=g.scrollTop})}}}}]);